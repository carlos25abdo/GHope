<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>تسجيل محل جديد - موقع الاتحاد العام</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"/>
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{
      font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background:linear-gradient(135deg,#0063a6 0%,#3ba3d8 100%);
      min-height:100vh;color:#222;display:flex;align-items:center;justify-content:center;padding:2rem
    }
    .container{background:#ffcb85;border-radius:25px;padding:3rem;width:100%;max-width:500px;position:relative;overflow:hidden}
    .container::before{content:'';position:absolute;top:0;left:0;right:0;height:5px;background:linear-gradient(90deg,#ff8500,#ffa53a,#ffcb85,#0063a6,#3ba3d8)}
    .header{text-align:center;margin-bottom:2.5rem}
    .header .pal-flag{display:flex;justify-content:center;align-items:center;gap:.5rem;margin-bottom:1rem}
    .header .pal-flag span{display:inline-block;width:40px;height:10px;border-radius:2px}
    .header .pal-flag .red{background:#ff8500}
    .header .pal-flag .white{background:#ffcb85;border:1px solid #3ba3d8}
    .header .pal-flag .green{background:#3ba3d8}
    .header .pal-flag .black{background:#0063a6}
    .header h1{color:#0063a6;font-size:2rem;margin-bottom:.5rem;letter-spacing:2px}
    .header p{color:#ff8500;font-size:1rem;font-weight:bold}
    .form-group{margin-bottom:1.5rem}
    .form-group label{display:block;margin-bottom:.5rem;color:#0063a6;font-weight:600;font-size:.95rem}
    .form-group input,.form-group select{
      width:100%;padding:1rem;border:2px solid #3ba3d8;border-radius:12px;font-size:1rem;transition:.3s;background:#fff
    }
    .form-group input:focus,.form-group select:focus{outline:0;border-color:#ff8500;background:#ffcb85}
    .submit-btn{
      width:100%;padding:1rem;background:linear-gradient(135deg,#ff8500,#3ba3d8);color:#fff;border:0;border-radius:12px;
      font-size:1.1rem;font-weight:600;cursor:pointer;transition:.3s;margin-top:1rem;letter-spacing:1px
    }
    .submit-btn:hover{background:linear-gradient(135deg,#3ba3d8,#ff8500);color:#ff8500}
    .back-link{text-align:center;margin-top:2rem}
    .back-link a{
      color:#fff;text-decoration:none;font-weight:600;padding:1rem 2rem;background:linear-gradient(135deg,#0063a6,#3ba3d8);
      border-radius:50px;transition:.3s;display:inline-block
    }
    .back-link a:hover{background:linear-gradient(135deg,#ff8500,#ffa53a);color:#0063a6}
    .back-link i{margin-left:.5rem}
    .success-message,.error-message{
      padding:1rem;border-radius:12px;margin-bottom:1.5rem;text-align:center;display:none;color:#fff
    }
    .success-message{background:#3ba3d8}
    .error-message{background:#ff8500}
    @media (max-width:768px){
      .container{padding:1rem;margin:.5rem}
      .header h1{font-size:1.2rem}
      .header p{font-size:1rem}
      .header .pal-flag span{width:30px;height:8px}
      .submit-btn,.form-group input{font-size:1rem}
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="pal-flag">
        <span class="red"></span><span class="white"></span><span class="green"></span><span class="black"></span>
      </div>
      <h1>تسجيل متبرع جديد لحملة غزة</h1>
      <p>كن جزءاً من العطاء، وادعم غزة بهويتك الفلسطينية.</p>
    </div>

    <div class="success-message" id="successMessage">
      <i class="fas fa-check-circle" style="color:#119149;"></i>
      تم إرسال البيانات! شكراً لمساهمتك.
    </div>
    <div class="error-message" id="errorMessage">
      <i class="fas fa-exclamation-circle" style="color:#fff;"></i>
      حدث خطأ أثناء التسجيل. يرجى المحاولة مرة أخرى.
    </div>

    <!-- iframe مخفي لاستقبال رد Google Forms بدون مغادرة الصفحة -->
    <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>

    <!-- النموذج: إرسال مباشر إلى Google Forms (بدون JS/AJAX) -->
    <form
      id="formA"
      method="POST"
      action="https://docs.google.com/forms/u/0/d/e/1FAIpQLSdD0NtAPXzSKlV-nYfSO7rzGqeEMxw76Dlc9-uZdtoyc-_Yiw/formResponse"
      target="hidden_iframe"
      onsubmit="handleSubmitting()"
    >
      <div class="form-group">
        <label for="shopName">
          <span style="background:linear-gradient(135deg,#ff8500,#ffa53a,#ffcb85,#0063a6,#3ba3d8);border-radius:50%;padding:6px;display:inline-block">
            <i class="fas fa-hand-holding-heart" style="color:#fff"></i>
          </span>
          اسم المحل
        </label>
        <input id="shopName" type="text" placeholder="أدخل اسم المحل" name="entry.1849007154" required/>
      </div>

      <div class="form-group">
        <label for="phone">
          <span style="background:linear-gradient(135deg,#0063a6,#3ba3d8,#ff8500,#ffa53a,#ffcb85);border-radius:50%;padding:6px;display:inline-block">
            <i class="fas fa-heart" style="color:#fff"></i>
          </span>
          رقم الهاتف
        </label>
        <input id="phone" type="tel" placeholder="أدخل رقم الهاتف" name="entry.163395635" required/>
      </div>

      <div class="form-group">
        <label for="location">
          <span style="background:linear-gradient(135deg,#ffcb85,#ff8500,#ffa53a,#0063a6,#3ba3d8);border-radius:50%;padding:6px;display:inline-block">
            <i class="fas fa-map-marker-alt" style="color:#fff"></i>
          </span>
          الموقع
        </label>
        <input id="location" type="text" placeholder="أدخل عنوان المحل" name="entry.301846562" required/>
      </div>

      <div class="form-group">
        <label for="donationValue">
          <span style="background:linear-gradient(135deg,#ff8500,#ffa53a,#ffcb85,#0063a6,#3ba3d8);border-radius:50%;padding:6px;display:inline-block">
            <i class="fas fa-coins" style="color:#fff"></i>
          </span>
          قيمة التبرع عن كل فاتورة
        </label>
        <select id="donationValue" name="entry.1491420652" required>
            <option value="">اختر قيمة التبرع</option>
            <option value="نصف دينار">نصف دينار</option>
            <option value="دينار واحد">دينار واحد</option>
            
          </select>
          
      </div>

      <button type="submit" class="submit-btn" id="submitBtn">
        <span style="background:linear-gradient(135deg,#ff8500,#ffa53a,#ffcb85,#0063a6,#3ba3d8);border-radius:50%;padding:6px;display:inline-block">
          <i class="fas fa-heart" style="color:#fff"></i>
        </span>
        تسجيل المحل
      </button>
    </form>

    <div class="back-link" style="margin-top:1rem">
      <a href="index.html"><i class="fas fa-arrow-right"></i>العودة للصفحة الرئيسية</a>
      <a href="list.html" style="margin-right:10px;"><i class="fas fa-list"></i>عرض قائمة المحلات</a>
    </div>
  </div>

  <script>
    const successMessage = document.getElementById("successMessage");
    const errorMessage = document.getElementById("errorMessage");
    const submitBtn = document.getElementById("submitBtn");
    const hiddenIframe = document.getElementById("hidden_iframe");

    function handleSubmitting(){
      // تعطيل الزر أثناء الإرسال
      submitBtn.disabled = true;
      submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> جاري التسجيل...';
      // إخفاء رسائل قديمة
      successMessage.style.display = "none";
      errorMessage.style.display = "none";
    }

    // عند اكتمال تحميل الاستجابة داخل الـ iframe نعتبر العملية ناجحة
    hiddenIframe.addEventListener("load", function(){
      submitBtn.disabled = false;
      submitBtn.innerHTML = `
        <span style="background:linear-gradient(135deg,#ff8500,#ffa53a,#ffcb85,#0063a6,#3ba3d8);border-radius:50%;padding:6px;display:inline-block">
          <i class="fas fa-heart" style="color:#fff"></i>
        </span> تسجيل المحل`;
      successMessage.style.display = "block";
      // بإمكانك تفريغ الحقول إذا رغبت:
      document.getElementById("formA").reset();
    });

    // تحسين بسيط لتفاعل الحقول
    document.querySelectorAll('input, select').forEach(el=>{
      el.addEventListener('focus',()=>{ el.parentElement.style.transform='scale(1.02)'; });
      el.addEventListener('blur',()=>{ el.parentElement.style.transform='scale(1)'; });
    });
  </script>
</body>
</html>
